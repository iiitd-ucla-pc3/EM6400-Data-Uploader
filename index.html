<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Em6400-data-uploader : " />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Em6400-data-uploader</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/iiitd-ucla-pc3/EM6400-Data-Uploader">View on GitHub</a>

          <h1 id="project_title">Em6400-data-uploader</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/iiitd-ucla-pc3/EM6400-Data-Uploader/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/iiitd-ucla-pc3/EM6400-Data-Uploader/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p><strong>Setting up Hardware</strong></p>

<ul>
<li>After existing meter, put CT's of required capacity on different phases.</li>
<li>Set the communication parameters on EM6400 as 19200,8,N,1 </li>
<li>Connect the D+ coming from the meter to the D- of RS485 to USB module and vice versa.</li>
</ul><hr><p><strong>Setting up Software</strong></p>

<p>After logging into plug computer and connecting it to internet run the following scripts. For internet connection see the following.
    <code>apt-get install git</code>
    <code>git clone git://github.com/iiitd-ucla-pc3/EM6400-Data-Uploader.git</code>
<code>cd EM6400-Data-Uploader/EM6400</code></p>

<ul>
<li><code>sh install.sh</code></li>
</ul><hr><p><strong>Configuring software</strong></p>

<p>Inside EM6400 folder create a file named db_password.py</p>

<p><code>nano db_password.py</code></p>

<p>In this file write your Dropbox email and password as follows:</p>

<p><code>email=YOUR_DROPBOX_REGISTERED_EMAIL_ID    password=YOUR_DROPBOX_PASSWORD</code></p>

<p>Open configuration.py file and adjust the following parameters according to your environment</p>

<ul>
<li>
<code>THRESHOLD_TIME</code>: Time in seconds after which a new CSV is created</li>
<li>
<code>DATA_BASE_PATH</code>: The path where the data gets stored, for plug computer set it to <code>/root/data/</code>
</li>
<li>
<code>METER_PORT</code>    : The serial port where the meter is connected</li>
<li>
<code>METER_ID</code>      : The slave id assigned to the meter</li>
<li>
<code>BAUD_RATE</code>     : The baud rate for serial communication</li>
<li>
<code>BASE_UPLOAD_PATH</code>:The path on dropbox in which to upload files</li>
<li>
<code>HEADER</code>          : Refer this page for more details about different parameters</li>
<li>
<code>EM6400_BASE_REGISTER</code>: EM6400 Base Register</li>
<li>
<code>EM6400_NUMBER_OF_REGISTERS</code>: Number of Registers to read</li>
<li>
<code>GMT_TIME_DIFFERENCE_MILLISECONDS</code>: +5.5 hours=19800000 milliseconds</li>
<li>
<code>TIMEZONE</code>: Refer to pytz documentation to put your timezone</li>
</ul><p>Copy rc.local from Plug_Computer_Scripts to /etc replacing the existing one on the plug computer.
In this file edit the following according to your configuration.</p>

<ul>
<li>ESSID: Write your SSID replacing NETGEAR in the following line <code>iwconfig mlan0 essid NETGEAR</code>
</li>
<li>Path for Data collection script: Modify <code>python /root/EM6400-Data-Uploader/EM6400/data_collect_csv_realtime_plot.py &amp;</code> according to your setup.</li>
<li>Path for ping test script: Modify <code>sh /root/EM6400-Data-Uploader/EM6400/Plug_Computer_Scripts/ping_test.sh &amp;</code> according to your setup path.</li>
</ul><p>In ping_test.sh file make the following changes according to your setup.</p>

<ul>
<li>ROUTER_ADDRESS="192.168.0.1"</li>
<li>Put your ESSID in the following line <code>iwconfig mlan0 essid "NETGEAR"</code>
</li>
<li>Path to killproc: Modify the following path if needed: <code>sh /root/EM6400-Data-Uploader/EM6400/Plug_Computer_Scripts/killproc.sh</code>
</li>
<li>Path to Dropbox Upload Script: Modify the following path if needed: <code>python /root/EM6400-Data-Uploader/EM6400/dropbox_upload.py &amp;</code>
</li>
</ul><p>`</p>

<p>`</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Em6400-data-uploader maintained by <a href="https://github.com/iiitd-ucla-pc3">iiitd-ucla-pc3</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
